//Copyright (c) 2014 by Disy Informationssysteme GmbH
package net.disy.eenvplus.tfes.modules.sparql.element;

import com.hp.hpl.jena.graph.Triple;
import com.hp.hpl.jena.sparql.expr.Expr;
import com.hp.hpl.jena.sparql.syntax.Element;
import com.hp.hpl.jena.sparql.syntax.ElementFilter;
import com.hp.hpl.jena.sparql.syntax.ElementGroup;
import com.hp.hpl.jena.sparql.syntax.ElementOptional;
import com.hp.hpl.jena.sparql.syntax.ElementTriplesBlock;

// NOT_PUBLISHED
public class ElementGroupBuilder {
  ElementGroup group = new ElementGroup();

  private ElementGroupBuilder() {
  }

  public static ElementGroupBuilder createGroup() {
    return new ElementGroupBuilder();
  }

  public ElementGroupBuilder add(Element element) {
    group.addElement(element);
    return this;
  }

  public ElementGroupBuilder add(Triple triple) {
    group.addTriplePattern(triple);
    return this;
  }

  public ElementGroup build() {
    return group;
  }

  public ElementGroupBuilder addOptional(Element optional) {
    group.addElement(new ElementOptional(optional));
    return this;
  }

  public ElementGroupBuilder addOptional(Triple create) {
    ElementTriplesBlock block = new ElementTriplesBlock();
    block.addTriple(create);
    group.addElement(new ElementOptional(block));
    return this;
  }

  public ElementGroupBuilder addOptional(Triple triple, boolean condition) {
    if (condition) {
      return addOptional(triple);
    }
    return this;
  }

  public ElementGroupBuilder addAsFilter(Expr expression) {
    group.addElementFilter(new ElementFilter(expression));
    return this;
  }

  public ElementGroupBuilder addAsFilter(Expr expression, boolean condition) {
    if (condition) {
      group.addElementFilter(new ElementFilter(expression));
    }
    return this;
  }

}
